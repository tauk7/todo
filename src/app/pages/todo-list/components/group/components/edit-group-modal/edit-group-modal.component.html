<mat-card>
  <mat-card-header>
    <mat-card-title>Edit Group</mat-card-title>
  </mat-card-header>
  <mat-card-content>
    <form [formGroup]="groupForm" class="form-field-line">
      <app-text-input label="Name" type="text" placeholder="Name" [control]="nameControl" [required]="true"></app-text-input>

      <mat-selection-list formArrayName="users" disableRipple (selectionChange)="onSelectionChange($event)">
        @for(user of users; track users) {
            <div class="list-container">
            <mat-list-option class="user-name" [selected]="isSelected(user.id)" [value]="user.id">
              <div matLine>
                <span>{{user.name}}</span>
              </div>
            </mat-list-option>

            <span class="user-info">
              @if(isSelected(user.id)){
                <span class="user-role">Admin</span>
                <mat-checkbox (change)="setAdminUser(user.id)" [checked]="user.admin" color="primary"></mat-checkbox>
              }
            </span>
        </div>
        }
      </mat-selection-list>
    </form>
  </mat-card-content>
  <mat-card-actions align="end">
    <button mat-icon-button color="warn" (click)="onDelete()">
      <mat-icon>delete</mat-icon>
    </button>
    <button mat-raised-button color="primary" (click)="onSubmit()">Edit</button>
  </mat-card-actions>
</mat-card>
